@model HalloDoc.DataAccessLayer.DataModels.ViewModels.dashboardTableModel


@{
    Layout = "_AdminHeader";
}
<script>

    var regionId;
    $(document).ready(function () {
        fetchProviderMenuData();
    });



</script>
<script>
    function fetchProviderMenuData() {
       

        regionId = $('#region').val()
        $.ajax({
            url: "/Admin/providerMenuTable",

            data: { 'regionId': regionId, 'pagenumber': 1 },

            success: function (data) {
                $('#providermenu-table').html(data);
            },
            error: function () {

            }
        });
    }
</script>

        <main>

            <div class="main-viewdocuments d-flex flex-column">
                <div class="view-documents d-flex flex-column  container">
                    <div class="d-flex flex-row">
                        <h3>Provider Information</h3>
               
                    </div>
                    <div class="d-flex providersearchtab">
                        <div class="col-md-4 form-floating mb-3">
                    <select name="region" id="region" class="form-select p-1 m-1" aria-label="Default select example">
                        <option selected>Select Regions</option>


                    </select>
                        </div>
                        <a role="button" style="height:fit-content;" href="/Admin/createPhysicianAccount" class="create-provider-btn p-1 ms-auto mb-2">Create Provider Account</a>
                    </div>


            <div id="providermenu-table">
            </div>
            <button id="saveChangesBtn" class="btn btn-primary col-md-3 ms-auto" style="display: none;">Save Changes</button>
                </div>
            </div>
        </main>







    @*This code is for Mobile View*@


    <div class="adminmobileview">

        @if (Model != null)
        {

            foreach (var item in Model.physicians)
            {
                <div class="card" role="button" data-toggle="collapse" data-target="#collapseExample" aria-expanded="false" aria-controls="collapseExample" id="BackgroundColormobile" value="@item.PhysicianId">
                    <div class="card-body d-flex flex-column justify-content-around">
                        <div class=" d-flex flex-row ">
                            <div class="form-check m-2 fs-4">
                                <input class="form-check-input check" type="checkbox" value="@item.PhysicianId" id="flexCheckDefault">
                                <label class="form-check-label" for="flexCheckDefault">

                                </label>
                            </div>
                            <p class="m-2 fs-4" id="pname">@item.FirstName</p>
                        </div>

                        <div class=" d-flex flex-row">
                            <p class="me-2">On Call Status:</p>
                            <b>Unavailable</b>
                        </div>

                       
                    </div>
                </div>
                <div class="collapse" id="collapseExample">
                    <div class="card card-body" id="BackgroundColormobileinnercard" value="@item.PhysicianId">

                        <p> <i class="fa-regular fa-user p-2 me-1" style="color: #a0a0a2;"></i>Role: @item.RoleId</p>
                        <p> <i class="fa-solid fa-check p-2 me-1"></i>Status: @item.Status</p>
                       
                        <div class=" d-flex flex-row justify-content-end">
                            <a class="providermenu-btn p-1 me-2" role="button" id="contact-option" data-bs-toggle="modal" data-bs-target="#myModal" value="@item.PhysicianId">Contact</a>
                            <a class="providermenu-btn p-1" role="button" href="@Url.Action("editPhysicianAccount", "Admin", new { physicianId = item.PhysicianId})">Edit</a>
                        </div>

                    </div>
                </div>

            }
        }

    </div>



    <!--For Contact Provider-->
    <div class="modal" id="myModal">
        <div class="modal-dialog">
            <div class="modal-content">
                <form id="contactProviderForm" action="/Admin/contactProvider" method="POST">
               
                    <!-- Modal Header -->
                    <div class="modal-header" style="background:#01bce9; color:white;">
                        <h4 class="modal-title">Contact Your Provider</h4>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
                   
                    <!-- Modal body -->
                    <div class="modal-body" style="color:grey;">

                        <p id="patientName" class="m-3">Choose communication to send message </p>
                        <input type="hidden" id="physicianinput1" name="physicianId" />

                        <div class="form-check">
                            <input class="form-check-input" value="1" type="radio" name="ctype" id="flexRadioDefault1">
                            <label class="form-check-label" for="flexRadioDefault1">
                                SMS
                            </label>
                        </div>

                         <div class="form-check">
                            <input class="form-check-input" type="radio" value="2" name="ctype" id="flexRadioDefault1">
                            <label class="form-check-label" for="flexRadioDefault1">
                                Email
                            </label>
                        </div>

                        <div class="form-check">
                            <input class="form-check-input" type="radio" value="3" name="ctype" id="flexRadioDefault1">
                            <label class="form-check-label" for="flexRadioDefault1">
                                Both
                            </label>
                        </div>

                        <div class="form-floating m-2">
                            <textarea name="messagebody" class="form-control symptoms-create-patient additionalnote shadow-none" placeholder="" id="floatingTextarea" style="height: 100px"></textarea>
                            <label class="symptoms-create-patient-text" for="floatingTextarea">Message</label>
                        </div>
                    </div>
                    <!-- Modal footer -->
                    <div class="modal-footer">
                        <button type="submit" class="btn submit-btn-cancelcase">Send</button>
                        <button type="button" class="btn cancel-btn-cancelcase" data-bs-dismiss="modal">Cancel</button>
                    </div>
                </form>
            </div>
        </div>
    </div>



<script>
    $(document).ready(function () {

        $.ajax({
            url: '/Admin/getAllRegions',
            type: 'GET',
          
            success: function (data) {

                var regionDropdown = $('#region');
                regionDropdown.empty();
                regionDropdown.append($('<option></option>').text("Select Regions"));
                $.each(data, function (index, region) {
                    regionDropdown.append($('<option></option>').attr('value', region.regionId).text(region.name));
                });
            }
        });
          



    });
</script>
 <script>

    $('#region').change(function () {
       
        fetchProviderMenuData();
    });
</script> 


    <script>
        $(document).ready(function () {
            var physicianId = null;
            $(document).on('click', '#contact-option', function () {

                physicianId = $(this).attr("value");

            });
            $('#contactProviderForm').submit(function (event) {
                alert()
                $('#physicianinput1').val(physicianId);


            });
        });
    </script>

    @*Script for all cards background, icon color and request type role*@
    <script>

        var cards = document.querySelectorAll('#BackgroundColormobile');

        cards.forEach(function (card) {
 
            var cbs = card.querySelectorAll('.card-body');
            cbs.forEach(function (cb) {
                cb.style.background = "rgba(116, 192, 252, 0.3)";
               
            });

        });
    </script>


    @*Script for all inner cards background *@
    <script>
        var innerCards = document.querySelectorAll('#BackgroundColormobileinnercard');

        innerCards.forEach(function (innerCard) {
            innerCard.style.background = "rgba(116, 192, 252, 0.3)";
        });
    </script>



    @*Script for collapse element hide and show*@
    <script>
        var cards = document.querySelectorAll('.card');

        cards.forEach(function (card) {
            card.addEventListener('click', function () {
                var collapseElement = this.nextElementSibling;
                var isExpanded = collapseElement.classList.contains('show');

                if (!isExpanded) {
                    collapseElement.classList.add('show');
                } else {
                    collapseElement.classList.remove('show');
                }
            });
        });
    </script>


    @*Script for all table rows background*@
    <script>

        var rows = document.querySelectorAll('#BackgroundColor');

        rows.forEach(function (row) {
            var val = row.getAttribute("value");
            var color;

            switch (val) {
                case '1':
                    color = "rgba(230, 51, 104, 0.5)";
                    break;
                case '2':
                    color = "rgba(53, 208, 22, 0.5)";
                    break;
                case '3':
                    color = "rgba(255, 212, 59, 0.5)";
                    break;
                default:
                    color = "rgba(116, 192, 252, 0.5)";
            }

            var tds = row.querySelectorAll('td');
            tds.forEach(function (td) {
                td.style.background = color;
            });
        });
    </script>
